<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>JSON Tool Premium - أداة إنشاء وتحرير وعارض JSON و XML للأندرويد</title>
    <meta name="description" content="JSON Tool Premium هو تطبيق أندرويد احترافي لإنشاء وتحرير وعرض ملفات JSON و XML، مع تحويل بين الصيغ، واجهة سهلة، وأدوات مخصصة للمطورين.">
    <meta name="keywords" content="JSON Tool, Json & Xml Tool, Json & Xml, JSON Editor, JSON Viewer, XML Tool, Android JSON App, JSON Parser, JSON Converter">
    <meta name="author" content="ssss.sy">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="revisit-after" content="7 days">
    <meta name="language" content="ar">
    <link rel="canonical" href="https://ssss.sy/JsonTool/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="JSON Tool Premium">
    <meta property="og:description" content="أفضل تطبيق لفتح ملفات Json و xml بطريقة جميلة وبنسخته المدفوعة وبدون إعلانات متاح مجانا لأجهزة الأندرويد">
    <meta property="og:image" content="./images/Json_Tool.png">
    <meta property="og:url" content="https://ssss.sy/JsonTool/">
    <meta property="og:site_name" content="JSON Tool Premium">
    <meta property="og:locale" content="ar_AR">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="JSON Tool Premium">
    <meta name="twitter:description" content="أفضل تطبيق لفتح ملفات Json و xml بطريقة جميلة وبنسخته المدفوعة وبدون إعلانات متاح مجانا لأجهزة الأندرويد">
    <meta name="twitter:image" content="./images/Json_Tool.png">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "JSON Tool Premium",
      "operatingSystem": "Android",
      "applicationCategory": "DeveloperApplication",
      "description": "تطبيق أندرويد احترافي لإنشاء وتحرير وعرض ملفات JSON و XML مع أدوات موجهة للمطورين.",
      "author": {
        "@type": "Person",
        "name": "RSaied"
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FE5722;
            --primary-dark: #E04A1A;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --dark: #0A1128;
            --dark-light: #1B2845;
            --text-light: #FFFFFF;
            --text-gray: #B8C5D6;
            --success: #51CF66;
            --error: #FF4757;
            --gradient-primary: linear-gradient(135deg, #FE5722 0%, #FF7043 100%);
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--dark);
            color: var(--text-light);
            line-height: 1.6;
            overflow-x: hidden;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--dark-light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 5px;
        }

        /* Loader */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s, visibility 0.5s;
        }

        #loader.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader-logo {
            width: 100px;
            height: 100px;
            background: var(--primary);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            animation: pulse 2s infinite;
            box-shadow: 0 10px 40px rgba(254, 87, 34, 0.5);
            overflow: hidden;
        }

        .loader-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .loader-text {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .loader-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        #main-content {
            opacity: 0;
            transition: opacity 0.5s;
        }

        #main-content.visible {
            opacity: 1;
        }

        /* Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #1B2845 0%, #0A1128 100%);
            overflow: hidden;
        }

        .bg-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.1;
            animation: float 25s infinite ease-in-out;
        }

        .bg-shape:nth-child(1) {
            width: 500px;
            height: 500px;
            background: var(--primary);
            top: -100px;
            right: -100px;
        }

        .bg-shape:nth-child(2) {
            width: 400px;
            height: 400px;
            background: var(--secondary);
            bottom: -100px;
            left: -100px;
            animation-delay: 5s;
        }

        .bg-shape:nth-child(3) {
            width: 300px;
            height: 300px;
            background: var(--accent);
            top: 50%;
            left: 50%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(100px, -100px); }
            50% { transform: translate(-50px, -150px); }
            75% { transform: translate(-100px, 50px); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(10, 17, 40, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
            font-weight: 900;
            color: var(--text-light);
            text-decoration: none;
        }

        .logo-icon {
            width: 45px;
            height: 45px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(254, 87, 34, 0.4);
        }

        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-light);
            cursor: pointer;
        }

        /* Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding: 100px 0 60px;
        }

        .hero-container {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 60px;
            align-items: center;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 1.5rem;
        }

        .hero h1 {
            font-size: 3rem;
            font-weight: 900;
            line-height: 1.2;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #FFFFFF 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.15rem;
            color: var(--text-gray);
            margin-bottom: 2rem;
            line-height: 1.7;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-family: 'Tajawal', sans-serif;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(255, 107, 53, 0.6);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-light);
            border: 2px solid var(--secondary);
        }

        .btn-secondary:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }

        /* Phone - FIXED NOTCH SIZE */
        .phone-showcase {
            position: relative;
            perspective: 1000px;
        }

        .phone-wrapper {
            position: relative;
            max-width: 280px;
            margin: 0 auto;
            transform: rotate(-8deg) translateX(30px);
            animation: phoneFloat 4s ease-in-out infinite;
        }

        @keyframes phoneFloat {
            0%, 100% { transform: rotate(-8deg) translateX(30px) translateY(0); }
            50% { transform: rotate(-8deg) translateX(30px) translateY(-20px); }
        }

        .phone {
            background: linear-gradient(145deg, #2a2a3e 0%, #1a1a2e 100%);
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.6), 0 0 30px rgba(255, 107, 53, 0.2);
        }

        .phone-screen {
            position: relative;
            border-radius: 32px;
            overflow: hidden;
            background: #000;
        }

        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 20px;
            background: #000;
            border-radius: 0 0 15px 15px;
            z-index: 10;
        }

        .phone-screen img {
            width: 100%;
            height: auto;
            display: block;
            transition: opacity 0.5s;
        }

        /* Sections */
        .section {
            padding: 80px 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .section-badge {
            display: inline-block;
            background: rgba(255, 107, 53, 0.1);
            color: var(--primary);
            padding: 8px 20px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 107, 53, 0.2);
        }

        .section-header h2 {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #FFFFFF 0%, var(--primary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-header p {
            font-size: 1.1rem;
            color: var(--text-gray);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Update Info */
        .update-card {
            max-width: 850px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            padding: 40px;
        }

        .version-badge {
            display: inline-block;
            background: var(--gradient-primary);
            color: white;
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.4);
        }

        .update-content {
            font-size: 1.05rem;
            line-height: 2;
            color: var(--text-gray);
            white-space: pre-line;
        }

        /* Features - NEW DESIGN */
        .features-intro {
            max-width: 900px;
            margin: 0 auto 40px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            padding: 40px;
            border-right: 4px solid var(--primary);
        }

        .features-intro h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1.5rem;
            line-height: 1.4;
        }

        .features-intro p {
            font-size: 1.05rem;
            line-height: 1.9;
            color: var(--text-gray);
            margin-bottom: 1.5rem;
        }

        .features-intro p:last-child {
            margin-bottom: 0;
        }

        .features-workflow {
            max-width: 900px;
            margin: 0 auto 50px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            padding: 40px;
        }

        .features-workflow h4 {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 1.5rem;
        }

        .workflow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .workflow-step {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .workflow-step:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.05);
        }

        .workflow-step i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .workflow-step strong {
            display: block;
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .workflow-step span {
            font-size: 0.95rem;
            color: var(--text-gray);
        }

        .features-security {
            max-width: 900px;
            margin: 0 auto 50px;
            background: rgba(78, 205, 196, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(78, 205, 196, 0.1);
            border-radius: 25px;
            padding: 30px;
            border-right: 4px solid var(--secondary);
        }

        .features-security h4 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .features-security p {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--text-gray);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            max-width: 1100px;
            margin: 0 auto;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            padding: 35px;
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-8px);
            border-color: rgba(255, 107, 53, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .feature-icon {
            width: 65px;
            height: 65px;
            background: var(--gradient-primary);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.3);
        }

        .feature-card h3 {
            font-size: 1.4rem;
            margin-bottom: 1.2rem;
            color: var(--text-light);
            font-weight: 700;
        }

        .feature-card ul {
            list-style: none;
            font-size: 1rem;
            color: var(--text-gray);
            line-height: 1.9;
        }

        .feature-card li {
            padding: 6px 0;
            padding-right: 22px;
            position: relative;
        }

        .feature-card li::before {
            content: '✓';
            position: absolute;
            right: 0;
            color: var(--secondary);
            font-size: 1.1rem;
            font-weight: 700;
        }

        /* Screenshots Carousel - ONE IMAGE PER VIEW */
        .screenshots-section {
            padding: 80px 0;
            background: rgba(255, 255, 255, 0.02);
            overflow: hidden;
        }

        .carousel-container {
            position: relative;
            width: 70%;
            max-width: 400px;
            margin: 40px auto 0;
            padding: 10px 0;
        }

        .carousel-wrapper {
            position: relative;
            overflow: hidden;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .carousel-track {
            display: flex;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
        }

        .carousel-item {
            flex: 0 0 100%;
            width: 100%;
            min-width: 100%;
            max-width: 100%;
        }

        .carousel-item img {
            width: 100%;
            height: auto;
            display: block;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .carousel-item img:hover {
            transform: scale(1.02);
        }

        /* Navigation Arrows */
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(254, 87, 34, 0.9);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .carousel-nav:hover {
            background: var(--primary);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 8px 20px rgba(254, 87, 34, 0.5);
        }

        .carousel-nav:active {
            transform: translateY(-50%) scale(0.95);
        }

        .carousel-nav.prev {
            right: -70px;
        }

        .carousel-nav.next {
            left: -70px;
        }

        /* Dots Indicator */
        .carousel-dots {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 30px;
        }

        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            cursor: pointer;
            transition: all 0.4s;
            padding: 0;
        }

        .carousel-dot.active {
            background: var(--primary);
            width: 35px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(254, 87, 34, 0.4);
        }

        .carousel-dot:hover:not(.active) {
            background: rgba(254, 87, 34, 0.6);
            transform: scale(1.2);
        }

        /* Slide Counter */
        .carousel-counter {
            text-align: center;
            margin-top: 15px;
            font-size: 0.95rem;
            color: var(--text-gray);
            font-weight: 600;
        }

        .carousel-counter .current {
            color: var(--primary);
            font-size: 1.1rem;
        }

        @media (max-width: 768px) {
            .carousel-container {
                max-width: 90%;
            }

            .carousel-nav {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .carousel-nav.prev {
                right: 10px;
            }

            .carousel-nav.next {
                left: 10px;
            }
        }

        @media (min-width: 769px) {
            .carousel-container {
                max-width: 450px;
            }
        }

        /* Lightbox للصور */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox-content {
            position: relative;
            max-width: 90%;
            max-height: 90%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 90vh;
            border-radius: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10001;
        }

        .lightbox-close:hover {
            background: var(--primary);
            transform: rotate(90deg);
        }

        .lightbox-prev,
        .lightbox-next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            z-index: 10001;
        }

        .lightbox-prev {
            right: 80px;
        }

        .lightbox-next {
            left: 80px;
        }

        .lightbox-prev:hover,
        .lightbox-next:hover {
            background: var(--primary);
            transform: translateY(-50%) scale(1.1);
        }

        @media (max-width: 768px) {
            .lightbox-prev {
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .lightbox-next {
                left: 10px;
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .lightbox-close {
                top: 10px;
                right: 10px;
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }

        /* Download */
        .download-card {
            max-width: 650px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 25px;
            padding: 45px;
            text-align: center;
        }

        .download-btn {
            width: 100%;
            max-width: 450px;
            padding: 18px 36px;
            font-size: 1.25rem;
            font-weight: 700;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 0 auto;
            box-shadow: 0 6px 25px rgba(255, 107, 53, 0.4);
            font-family: 'Tajawal', sans-serif;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 35px rgba(255, 107, 53, 0.6);
        }

        .download-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* Progress */
        .progress-wrapper {
            margin-top: 2.5rem;
            display: none;
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .progress-bar-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 15px;
            width: 0%;
            transition: width 0.3s;
        }

        .progress-info {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
        }

        .progress-stat {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 12px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-gray);
            margin-bottom: 5px;
        }

        .stat-value {
            font-weight: 700;
            color: var(--secondary);
            font-size: 1.1rem;
        }

        /* Success */
        .success-message {
            display: none;
            margin-top: 2.5rem;
        }

        .success-icon {
            width: 70px;
            height: 70px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.2rem;
            font-size: 2.2rem;
            animation: scaleIn 0.5s ease;
        }

        /* Error */
        .error-message {
            display: none;
            margin-top: 2.5rem;
        }

        .error-icon {
            width: 70px;
            height: 70px;
            background: var(--error);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.2rem;
            font-size: 2.2rem;
            animation: scaleIn 0.5s ease;
        }

        @keyframes scaleIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .direct-link {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 107, 53, 0.1);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 18px;
        }

        .direct-link p {
            font-size: 1rem;
            color: var(--text-gray);
            margin-bottom: 1.2rem;
            line-height: 1.6;
        }

        .btn-direct {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 28px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.05rem;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.4);
        }

        .btn-direct:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 53, 0.6);
        }

        /* Footer */
        footer {
            background: rgba(10, 17, 40, 0.8);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 35px 0 20px;
            text-align: center;
            color: var(--text-gray);
        }

        footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        /* Mobile */
        @media (max-width: 768px) {
            .hero-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .phone-showcase {
                order: -1;
                margin: 0 auto;
            }

            .phone-wrapper {
                max-width: 180px;
                transform: rotate(-5deg);
                animation: phoneMobileFloat 3s ease-in-out infinite;
            }

            @keyframes phoneMobileFloat {
                0%, 100% { transform: rotate(-5deg) translateY(0); }
                50% { transform: rotate(-5deg) translateY(-15px); }
            }

            .phone-notch {
                width: 60px;
                height: 14px;
                border-radius: 0 0 10px 10px;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .nav-links {
                position: fixed;
                top: 70px;
                left: 0;
                right: 0;
                width: 100%;
                height: calc(100vh - 70px);
                background: rgba(10, 17, 40, 0.98);
                backdrop-filter: blur(20px);
                flex-direction: column;
                justify-content: center;
                gap: 2rem;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            }

            .nav-links.active {
                transform: translateX(0);
            }

            .menu-toggle {
                display: block;
            }

            .section-header h2 {
                font-size: 2rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .workflow-steps {
                grid-template-columns: 1fr;
            }

            .carousel-item {
                width: 220px;
            }

            .progress-info {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }
        }

        @media (max-width: 480px) {
            .progress-info {
                grid-template-columns: 1fr;
            }

            .carousel-item {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div id="loader">
        <div class="loader-logo">
            <img src="./favicon.ico" alt="JSON Tool Logo">
        </div>
        <div class="loader-text">JSON Tool Premium</div>
        <div class="loader-spinner"></div>
    </div>

    <!-- Main Content -->
    <div id="main-content">
        <div class="animated-bg">
            <div class="bg-shape"></div>
            <div class="bg-shape"></div>
            <div class="bg-shape"></div>
        </div>

        <!-- Header -->
        <header>
            <div class="container">
                <nav>
                    <a href="#" class="logo">
                        <div class="logo-icon">
                            <img src="./favicon.ico" alt="JSON Tool Logo">
                        </div>
                        <span>JSON Tool</span>
                    </a>
                    <ul class="nav-links" id="navLinks">
                        <li><a href="#home">الرئيسية</a></li>
                        <li><a href="#features">المميزات</a></li>
                        <li><a href="#screenshots">الصور</a></li>
                        <li><a href="#download">التحميل</a></li>
                    </ul>
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </nav>
            </div>
        </header>

        <!-- Hero -->
        <section class="hero" id="home">
            <div class="container">
                <div class="hero-container">
                    <div class="hero-content">
                        <div class="hero-badge">
                            <i class="fas fa-star"></i>
                            <span>الإصدار المميز - مجاناً</span>
                        </div>
                        <h1>JSON Tool Premium</h1>
                        <p>الأداة الشاملة لإنشاء وتحرير وعرض ملفات JSON و XML. أداة متكاملة تجمع بين وظائف المنشئ والمحرر والمستعرض في مكان واحد، مع واجهة عرض هرمية بسيطة ومحول قوي بين الصيغ.</p>
                        <div class="hero-buttons">
                            <a href="#download" class="btn btn-primary">
                                <i class="fas fa-download"></i>
                                <span>تحميل مجاني</span>
                            </a>
                            <a href="#features" class="btn btn-secondary">
                                <i class="fas fa-list"></i>
                                <span>المميزات الكاملة</span>
                            </a>
                        </div>
                    </div>
                    <div class="phone-showcase">
                        <div class="phone-wrapper">
                            <div class="phone">
                                <div class="phone-screen">
                                    <div class="phone-notch"></div>
                                    <img src="./images/Screenshot_1.jpg" alt="JSON Tool" id="phoneImage">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Update Info -->
        <section class="section">
            <div class="container">
                <div class="section-header">
                    <span class="section-badge">آخر تحديث</span>
                    <h2>الإصدار الجديد</h2>
                    <p>تعرف على أحدث الميزات والتحسينات في الإصدار الجديد</p>
                </div>
                <div class="update-card">
                    <div style="text-align: center;">
                        <span class="version-badge" id="versionBadge">جاري التحميل...</span>
                    </div>
                    <div class="update-content" id="updateContent">
                        <p style="text-align: center; color: var(--text-gray);">جاري تحميل معلومات التحديث...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section class="section" id="features">
            <div class="container">
                <div class="section-header">
                    <span class="section-badge">المميزات</span>
                    <h2>JSON & XML Tool</h2>
                    <p>الأداة الشاملة لإنشاء وتحرير وعرض ملفات JSON و XML</p>
                </div>
                
                <!-- Intro -->
                <div class="features-intro">
                    <h3>أداة متكاملة للتعامل مع الملفات البرمجية</h3>
                    <p>يُعد تطبيق JSON & XML Tool الأداة النهائية والمتكاملة للتعامل مع الملفات البرمجية، حيث يجمع بين وظائف المنشئ (Creator)، المحرر (Editor)، والمستعرض (Viewer) لملفات JSON و XML في مكان واحد.</p>
                    <p>يتيح لك التطبيق عرض وإنشاء وتحرير الملفات بكل سهولة بفضل واجهة العرض الهرمية البسيطة. تُعد هذه الأداة مفيدة لسيناريوهات متعددة، مثل تعديل وصناعة إضافات الألعاب (Game Addons). بالإضافة إلى ذلك، يعمل التطبيق كمحول قوي بين الصيغ (مثلاً: تحميل ملف JSON وحفظه بصيغة XML). كلا التنسيقين مدعومان بشكل متبادل، حيث يعمل التطبيق كمستعرض لملفات XML ومحلل مرئي لشجرة بيانات JSON.</p>
                </div>

                <!-- Workflow -->
                <div class="features-workflow">
                    <h4>كيف يعمل التطبيق؟ (آلية الاستخدام)</h4>
                    <p style="font-size: 1.05rem; color: var(--text-gray); margin-bottom: 2rem; line-height: 1.8;">يتميز التطبيق بالبساطة وسلاسة سير العمل:</p>
                    <div class="workflow-steps">
                        <div class="workflow-step">
                            <i class="fas fa-plus-circle"></i>
                            <strong>الإنشاء</strong>
                            <span>بناء بيانات جديدة باستخدام الأدوات المدمجة</span>
                        </div>
                        <div class="workflow-step">
                            <i class="fas fa-upload"></i>
                            <strong>التحميل</strong>
                            <span>استيراد البيانات عبر قارئ الملفات الداخلي</span>
                        </div>
                        <div class="workflow-step">
                            <i class="fas fa-eye"></i>
                            <strong>العرض</strong>
                            <span>معاينة البيانات بوضوح باستخدام المستعرض</span>
                        </div>
                        <div class="workflow-step">
                            <i class="fas fa-edit"></i>
                            <strong>التحرير</strong>
                            <span>تعديل البيانات باستخدام المحرر المتطور</span>
                        </div>
                        <div class="workflow-step">
                            <i class="fas fa-save"></i>
                            <strong>الحفظ والمشاركة</strong>
                            <span>حفظ عملك أو مشاركته كنص</span>
                        </div>
                    </div>
                </div>

                <!-- Security -->
                <div class="features-security">
                    <h4><i class="fas fa-shield-alt"></i> سياسة التخزين والأمان</h4>
                    <p>يعتمد التطبيق على مستعرض الملفات الخاص بإطار عمل الوصول إلى التخزين (SAF)، مما يعني أنه لا يتطلب أذونات تخزين واسعة (قراءة وكتابة) ليعمل. ومع ذلك، قد يطلب الإذن فقط في حالات محددة، مثل تحميل ملف عبر مدير ملفات خارجي لم يمنح الصلاحية المناسبة.</p>
                </div>

                <!-- Features Grid -->
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-eye"></i>
                        </div>
                        <h3>عرض ملفات JSON / XML</h3>
                        <ul>
                            <li>تحميل الملفات باستخدام منتقي الملفات الداخلي (SAF)</li>
                            <li>تحميل الملفات عبر منتقي ملفات خارجي (قد يتطلب إذناً)</li>
                            <li>التنزيل مباشرة من الويب عن طريق رابط (URL)</li>
                            <li>لصق النصوص وتحليلها (Parse) فورياً</li>
                            <li>استلام نصوص الملفات من تطبيقات أخرى (عبر ميزة المشاركة)</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-plus-square"></i>
                        </div>
                        <h3>إنشاء ملفات JSON / XML</h3>
                        <ul>
                            <li>إنشاء ملفات جديدة كلياً من الصفر</li>
                            <li>إمكانية الاختيار بين أنواع "عنصر الجذر" (Root Element)</li>
                            <li>اختيار بين كائن (Object) أو مصفوفة (Array) عند بدء الملف</li>
                            <li>واجهة سهلة لبناء الهياكل المعقدة</li>
                            <li>دعم كامل لجميع أنواع البيانات</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        <h3>تحرير ملفات JSON / XML</h3>
                        <ul>
                            <li>إضافة، تكرار، وإزالة العناصر (Elements)</li>
                            <li>إعادة تسمية العناصر والمفاتيح</li>
                            <li>تعديل قيم العناصر بسهولة</li>
                            <li>التبديل المرن بين أنواع القيم: منطقية ورقمية ونصية</li>
                            <li>نقل العناصر للأعلى والأسفل داخل المصفوفات</li>
                            <li>الحفظ كملف جديد أو الكتابة فوق الملف الحالي</li>
                        </ul>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3>ميزات إضافية متقدمة</h3>
                        <ul>
                            <li>دعم الوضع الداكن (Dark Theme)</li>
                            <li>معاينة العمل كنص أثناء التحرير</li>
                            <li>تنسيق النص (Formatted output) ليكون مرتباً</li>
                            <li>مشاركة نصوص JSON / XML مع تطبيقات خارجية</li>
                            <li>تسجيل التطبيق كمعالج افتراضي لفتح الملفات</li>
                            <li>تصدير الملفات كمستندات PDF</li>
                            <li>استخراج وتحويل العناصر باستخدام JMESPath</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Screenshots -->
        <section class="screenshots-section" id="screenshots">
            <div class="container">
                <div class="section-header">
                    <span class="section-badge">معرض الصور</span>
                    <h2>شاهد التطبيق في العمل</h2>
                    <p>جولة مصورة لواجهة التطبيق ومميزاته المختلفة</p>
                </div>
            </div>
            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <div class="carousel-track" id="carouselTrack"></div>
                    <button class="carousel-nav prev" id="carouselPrev" aria-label="الصورة السابقة">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    <button class="carousel-nav next" id="carouselNext" aria-label="الصورة التالية">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                <div class="carousel-counter" id="carouselCounter">
                    <span class="current">1</span> / <span class="total">9</span>
                </div>
                <div class="carousel-dots" id="carouselDots"></div>
            </div>
        </section>

        <!-- Download -->
        <section class="section" id="download">
            <div class="container">
                <div class="section-header">
                    <span class="section-badge">التحميل</span>
                    <h2>ابدأ الآن مجاناً</h2>
                    <p>حمّل JSON Tool Premium واستمتع بجميع الميزات بدون قيود</p>
                </div>
                <div class="download-card">
                    <button class="download-btn" id="downloadBtn">
                        <i class="fas fa-download"></i>
                        <span>تحميل التطبيق</span>
                    </button>
                    
                    <div class="progress-wrapper" id="progressWrapper">
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" id="progressBarFill"></div>
                        </div>
                        <div class="progress-info">
                            <div class="progress-stat">
                                <div class="stat-label">التقدم</div>
                                <div class="stat-value" id="progressPercent">0%</div>
                            </div>
                            <div class="progress-stat">
                                <div class="stat-label">الحجم</div>
                                <div class="stat-value" id="sizeValue">0 MB</div>
                            </div>
                            <div class="progress-stat">
                                <div class="stat-label">السرعة</div>
                                <div class="stat-value" id="speedValue">0 KB/s</div>
                            </div>
                            <div class="progress-stat">
                                <div class="stat-label">المتبقي</div>
                                <div class="stat-value" id="timeValue">--:--</div>
                            </div>
                        </div>
                    </div>

                    <div class="success-message" id="successMessage">
                        <div class="success-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: var(--success); margin-bottom: 0.8rem;">تم التحميل بنجاح!</div>
                        <p style="color: var(--text-gray);">يمكنك الآن تثبيت التطبيق من مجلد التنزيلات</p>
                        
                        <div class="direct-link">
                            <p>إذا لم يظهر الملف في مجلد التنزيلات، يمكنك الضغط على الزر أدناه للتحميل المباشر:</p>
                            <a href="" class="btn-direct" id="directDownloadBtn" download>
                                <i class="fas fa-download"></i>
                                <span>تحميل مباشر</span>
                            </a>
                        </div>
                    </div>

                    <div class="error-message" id="errorMessage">
                        <div class="error-icon">
                            <i class="fas fa-times"></i>
                        </div>
                        <div style="font-size: 1.3rem; font-weight: 700; color: var(--error); margin-bottom: 0.8rem;">فشل التحميل!</div>
                        <p style="color: var(--text-gray);">حدث خطأ أثناء التحميل. يرجى استخدام زر التحميل المباشر أدناه</p>
                        
                        <div class="direct-link">
                            <p>يمكنك الضغط على الزر أدناه للتحميل المباشر:</p>
                            <a href="" class="btn-direct" id="directDownloadBtn2" download>
                                <i class="fas fa-download"></i>
                                <span>تحميل مباشر</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="container">
                <p style="font-size: 0.95rem;">© 2026 JSON Tool Premium. جميع الحقوق محفوظة | تطوير <a href="https://RSaied.github.io">RSaied.github.io</a></p>
            </div>
        </footer>
    </div>

    <!-- Lightbox للصور -->
    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" id="lightboxClose">
            <i class="fas fa-times"></i>
        </button>
        <button class="lightbox-prev" id="lightboxPrev">
            <i class="fas fa-chevron-right"></i>
        </button>
        <button class="lightbox-next" id="lightboxNext">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div class="lightbox-content">
            <img class="lightbox-image" id="lightboxImage" src="" alt="Screenshot">
        </div>
    </div>

    <script>
        // Loader
        window.addEventListener('load', function() {
            setTimeout(() => {
                document.getElementById('loader').classList.add('hidden');
                document.getElementById('main-content').classList.add('visible');
            }, 800);
        });

        // Mobile menu
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            const icon = menuToggle.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        });

        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                menuToggle.querySelector('i').classList.replace('fa-times', 'fa-bars');
            });
        });

        // Phone slider
        const phoneImage = document.getElementById('phoneImage');
        const screenshots = [
            './images/Screenshot_1.jpg',
            './images/Screenshot_2.jpg',
            './images/Screenshot_3.jpg',
            './images/Screenshot_4.jpg',
            './images/Screenshot_5.jpg',
            './images/Screenshot_6.jpg',
            './images/Screenshot_7.jpg',
            './images/Screenshot_8.jpg',
            './images/Screenshot_9.jpg'
        ];
        let currentIndex = 0;
        
        setInterval(() => {
            currentIndex = (currentIndex + 1) % screenshots.length;
            phoneImage.style.opacity = '0';
            setTimeout(() => {
                phoneImage.src = screenshots[currentIndex];
                phoneImage.style.opacity = '1';
            }, 300);
        }, 3500);

        // Screenshots Carousel - SLIDESHOW WITH AUTO-PLAY
        const carouselImages = [
            './images/Screenshot_1.jpg',
            './images/Screenshot_2.jpg',
            './images/Screenshot_3.jpg',
            './images/Screenshot_4.jpg',
            './images/Screenshot_5.jpg',
            './images/Screenshot_6.jpg',
            './images/Screenshot_7.jpg',
            './images/Screenshot_8.jpg',
            './images/Screenshot_9.jpg'
        ];

        let currentSlide = 0;
        let autoPlayInterval;

        function initCarousel() {
            const track = document.getElementById('carouselTrack');
            const dotsContainer = document.getElementById('carouselDots');
            
            if (!track || !dotsContainer) {
                console.error('Carousel elements not found');
                return;
            }
            
            // مسح المحتوى
            track.innerHTML = '';
            dotsContainer.innerHTML = '';
            
            // إنشاء الصور
            carouselImages.forEach((src, index) => {
                // إنشاء عنصر الصورة
                const item = document.createElement('div');
                item.className = 'carousel-item';
                
                const img = document.createElement('img');
                img.src = src;
                img.alt = `Screenshot ${index + 1}`;
                img.loading = index === 0 ? 'eager' : 'lazy';
                
                item.appendChild(img);
                track.appendChild(item);
                
                // إضافة حدث النقر لفتح الصورة
                item.addEventListener('click', () => {
                    openLightbox(index);
                });
                
                // إنشاء نقطة المؤشر
                const dot = document.createElement('button');
                dot.className = 'carousel-dot';
                if (index === 0) dot.classList.add('active');
                dot.addEventListener('click', () => {
                    goToSlide(index);
                });
                dotsContainer.appendChild(dot);
            });
            
            // إضافة أحداث الأزرار
            const prevBtn = document.getElementById('carouselPrev');
            const nextBtn = document.getElementById('carouselNext');
            
            if (prevBtn) prevBtn.addEventListener('click', prevSlide);
            if (nextBtn) nextBtn.addEventListener('click', nextSlide);
            
            // بدء التشغيل التلقائي
            startAutoPlay();
            
            console.log('Carousel initialized with', carouselImages.length, 'slides');
        }

        function goToSlide(index) {
            const track = document.getElementById('carouselTrack');
            const dots = document.querySelectorAll('.carousel-dot');
            const counter = document.getElementById('carouselCounter');
            
            currentSlide = index;
            const isRTL = document.documentElement.dir === 'rtl';
            const offset = isRTL ? currentSlide * 100 : -currentSlide * 100;
            // تحديث موضع المعرض - كل صورة تأخذ 100% من العرض
            track.style.transform = `translateX(${offset}%)`;
            
            // تحديث النقاط
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === currentSlide);
            });
            
            // تحديث العداد
            if (counter) {
                const currentSpan = counter.querySelector('.current');
                if (currentSpan) {
                    currentSpan.textContent = currentSlide + 1;
                }
            }
            
            // إعادة تشغيل التبديل التلقائي
            resetAutoPlay();
        }

        function nextSlide() {
            const nextIndex = (currentSlide + 1) % carouselImages.length;
            goToSlide(nextIndex);
        }

        function prevSlide() {
            const prevIndex = (currentSlide - 1 + carouselImages.length) % carouselImages.length;
            goToSlide(prevIndex);
        }

        function startAutoPlay() {
            autoPlayInterval = setInterval(() => {
                nextSlide();
            }, 4000); // تبديل كل 4 ثواني
        }

        function stopAutoPlay() {
            if (autoPlayInterval) {
                clearInterval(autoPlayInterval);
            }
        }

        function resetAutoPlay() {
            stopAutoPlay();
            startAutoPlay();
        }

        // إيقاف التشغيل التلقائي عند التمرير على المعرض
        const carouselContainer = document.querySelector('.carousel-container');
        if (carouselContainer) {
            carouselContainer.addEventListener('mouseenter', stopAutoPlay);
            carouselContainer.addEventListener('mouseleave', startAutoPlay);
        }

        // تهيئة المعرض
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initCarousel);
        } else {
            initCarousel();
        }

        // Lightbox functionality
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightboxImage');
        const lightboxClose = document.getElementById('lightboxClose');
        const lightboxPrev = document.getElementById('lightboxPrev');
        const lightboxNext = document.getElementById('lightboxNext');
        let currentLightboxIndex = 0;

        function openLightbox(index) {
            currentLightboxIndex = index;
            lightboxImage.src = carouselImages[index];
            lightbox.classList.add('active');
            stopAutoPlay(); // إيقاف التشغيل التلقائي عند فتح الصورة
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.remove('active');
            startAutoPlay(); // استئناف التشغيل التلقائي عند الإغلاق
            document.body.style.overflow = '';
        }

        function showNextImage() {
            currentLightboxIndex = (currentLightboxIndex + 1) % carouselImages.length;
            lightboxImage.src = carouselImages[currentLightboxIndex];
        }

        function showPrevImage() {
            currentLightboxIndex = (currentLightboxIndex - 1 + carouselImages.length) % carouselImages.length;
            lightboxImage.src = carouselImages[currentLightboxIndex];
        }

        // Event listeners for lightbox
        if (lightboxClose) {
            lightboxClose.addEventListener('click', closeLightbox);
        }
        if (lightboxNext) {
            lightboxNext.addEventListener('click', showNextImage);
        }
        if (lightboxPrev) {
            lightboxPrev.addEventListener('click', showPrevImage);
        }

        // Close on background click
        if (lightbox) {
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (!lightbox || !lightbox.classList.contains('active')) return;
            
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft') showNextImage();
            if (e.key === 'ArrowRight') showPrevImage();
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    window.scrollTo({
                        top: target.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Load update info
        let downloadUrlGlobal = '';
        let downloadUrlApkGlobal = '';
        
        async function loadUpdateInfo() {
            try {
                const response = await fetch('./update.json');
                const data = await response.json();
                
                if (data.hasUpdate) {
                    document.getElementById('versionBadge').textContent = `الإصدار ${data.version}`;
                    document.getElementById('updateContent').textContent = data.features;
                    
                    downloadUrlGlobal = data.downloadUrl || '';
                    downloadUrlApkGlobal = data.downloadUrlApk || data.downloadUrl || '';
                    
                    updateDirectDownloadButton();
                }
            } catch (error) {
                console.error('خطأ في تحميل معلومات التحديث:', error);
                document.getElementById('updateContent').innerHTML = '<p style="text-align: center; color: var(--primary);">تعذر تحميل معلومات التحديث</p>';
            }
        }
        
        function updateDirectDownloadButton() {
            const directBtn = document.getElementById('directDownloadBtn');
            const directBtn2 = document.getElementById('directDownloadBtn2');
            
            // استخراج اسم الملف من الرابط
            const urlParts = downloadUrlApkGlobal.split('/');
            let filename = urlParts[urlParts.length - 1];
            try {
                filename = decodeURIComponent(filename);
            } catch (e) {
                filename = 'JSON_Tool_Premium.apk';
            }
            if (!filename || filename === '') {
                filename = 'JSON_Tool_Premium.apk';
            }
            
            // تحديث زر النجاح
            if (downloadUrlApkGlobal && directBtn) {
                directBtn.href = downloadUrlApkGlobal;
                directBtn.setAttribute('download', filename);
            }
            
            // تحديث زر الخطأ
            if (downloadUrlApkGlobal && directBtn2) {
                directBtn2.href = downloadUrlApkGlobal;
                directBtn2.setAttribute('download', filename);
            }
        }
        
        loadUpdateInfo();

        // Download
        const downloadBtn = document.getElementById('downloadBtn');
        const progressWrapper = document.getElementById('progressWrapper');
        const progressBarFill = document.getElementById('progressBarFill');
        const progressPercent = document.getElementById('progressPercent');
        const speedValue = document.getElementById('speedValue');
        const timeValue = document.getElementById('timeValue');
        const sizeValue = document.getElementById('sizeValue');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');

        downloadBtn.addEventListener('click', startDownload);

        async function startDownload() {
            if (!downloadUrlApkGlobal) {
                alert('جاري تحميل معلومات التحديث، يرجى الانتظار قليلاً...');
                return;
            }

            try {
                progressWrapper.style.display = 'block';
                successMessage.style.display = 'none';
                errorMessage.style.display = 'none';
                downloadBtn.disabled = true;
                downloadBtn.innerHTML = '<span class="spinner"></span><span>جاري التحميل...</span>';

                const xhr = new XMLHttpRequest();
                xhr.open('GET', downloadUrlApkGlobal, true);
                xhr.responseType = 'blob';

                let startTime = Date.now();
                let lastLoaded = 0;
                let lastTime = startTime;
                let speeds = [];

                xhr.onprogress = function(event) {
                    if (event.lengthComputable) {
                        const currentTime = Date.now();
                        const timeElapsed = (currentTime - lastTime) / 1000;

                        if (timeElapsed >= 1) {
                            const loaded = event.loaded;
                            const total = event.total;
                            const percentage = (loaded / total) * 100;

                            progressBarFill.style.width = percentage + '%';
                            progressPercent.textContent = Math.round(percentage) + '%';

                            const loadedMB = (loaded / (1024 * 1024)).toFixed(1);
                            const totalMB = (total / (1024 * 1024)).toFixed(1);
                            sizeValue.textContent = `${loadedMB}/${totalMB} MB`;

                            const bytesLoaded = loaded - lastLoaded;
                            const instantSpeed = bytesLoaded / timeElapsed;
                            
                            speeds.push(instantSpeed);
                            if (speeds.length > 5) speeds.shift();
                            
                            const avgSpeed = speeds.reduce((a, b) => a + b, 0) / speeds.length;

                            if (avgSpeed > 1024 * 1024) {
                                speedValue.textContent = (avgSpeed / (1024 * 1024)).toFixed(2) + ' MB/s';
                            } else if (avgSpeed > 1024) {
                                speedValue.textContent = (avgSpeed / 1024).toFixed(1) + ' KB/s';
                            } else {
                                speedValue.textContent = avgSpeed.toFixed(0) + ' B/s';
                            }

                            const remainingBytes = total - loaded;
                            const remainingSeconds = remainingBytes / avgSpeed;

                            if (remainingSeconds < 60) {
                                timeValue.textContent = Math.ceil(remainingSeconds) + ' ث';
                            } else {
                                const minutes = Math.floor(remainingSeconds / 60);
                                const seconds = Math.ceil(remainingSeconds % 60);
                                timeValue.textContent = minutes + ':' + String(seconds).padStart(2, '0');
                            }

                            lastLoaded = loaded;
                            lastTime = currentTime;
                        }
                    }
                };

                xhr.onload = function() {
                    if (xhr.status === 200) {
                        const blob = xhr.response;
                        const url = window.URL.createObjectURL(blob);
                        
                        const urlParts = downloadUrlApkGlobal.split('/');
                        let filename = urlParts[urlParts.length - 1];
                        
                        try {
                            filename = decodeURIComponent(filename);
                        } catch (e) {
                            console.warn('Could not decode filename');
                        }
                        
                        if (!filename || filename === '') {
                            filename = 'JSON_Tool_Premium.apk';
                        }
                        
                        const a = document.createElement('a');
                        a.style.display = 'none';
                        a.href = url;
                        a.download = filename;
                        document.body.appendChild(a);
                        a.click();
                        
                        setTimeout(() => {
                            document.body.removeChild(a);
                            window.URL.revokeObjectURL(url);
                            
                            if ('caches' in window) {
                                caches.keys().then(names => {
                                    names.forEach(name => {
                                        caches.delete(name);
                                    });
                                });
                            }
                        }, 100);

                        progressWrapper.style.display = 'none';
                        successMessage.style.display = 'block';
                        errorMessage.style.display = 'none';
                        updateDirectDownloadButton();
                        
                        setTimeout(() => {
                            downloadBtn.disabled = false;
                            downloadBtn.innerHTML = '<i class="fas fa-download"></i><span>تحميل التطبيق</span>';
                        }, 3000);
                    } else {
                        // فشل التحميل - حالة HTTP غير صحيحة
                        downloadBtn.disabled = false;
                        downloadBtn.innerHTML = '<i class="fas fa-download"></i><span>إعادة المحاولة</span>';
                        progressWrapper.style.display = 'none';
                        successMessage.style.display = 'none';
                        errorMessage.style.display = 'block';
                        updateDirectDownloadButton();
                    }
                };

                xhr.onerror = function() {
                    downloadBtn.disabled = false;
                    downloadBtn.innerHTML = '<i class="fas fa-download"></i><span>إعادة المحاولة</span>';
                    progressWrapper.style.display = 'none';
                    successMessage.style.display = 'none';
                    errorMessage.style.display = 'block';
                    updateDirectDownloadButton();
                };

                xhr.send();
            } catch (error) {
                console.error('خطأ في التحميل:', error);
                downloadBtn.disabled = false;
                downloadBtn.innerHTML = '<i class="fas fa-download"></i><span>تحميل التطبيق</span>';
                progressWrapper.style.display = 'none';
                successMessage.style.display = 'none';
                errorMessage.style.display = 'block';
                updateDirectDownloadButton();
            }
        }
    </script>
</body>
</html>
